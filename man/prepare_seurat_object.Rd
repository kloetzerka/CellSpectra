% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_seurat_object.R
\name{prepare_seurat_object}
\alias{prepare_seurat_object}
\title{Prepare Seurat Object for reference generation / pseudobulking / spectra analysis}
\usage{
prepare_seurat_object(
  seurat_obj,
  celltype_col,
  sample_id_col,
  condition_col,
  query_list,
  control_list
)
}
\arguments{
\item{seurat_obj}{A Seurat object to be modified.}

\item{celltype_col}{Name of the column in the Seurat object metadata that contains cell type annotations.}

\item{sample_id_col}{Name of the column in the Seurat object metadata that contains sample/patient identifiers.}

\item{condition_col}{Name of the column in the Seurat object metadata that contains condition information.}

\item{query_list}{List of values in the condition column to be mapped as 'query'.}

\item{control_list}{List of values in the condition column to be mapped as 'control'.}
}
\value{
A modified Seurat object with additional metadata columns: celltype_annotation, orig_ident, and query_control.
}
\description{
Modifies a Seurat object to include specific metadata: cell type annotation, sample/patient identifier,
and condition information (mapped to 'query' or 'control' based on provided lists).
}
\examples{
# Create dummy count matrix
counts <- matrix(rpois(20, lambda = 5), nrow = 4)
rownames(counts) <- paste0("Gene", 1:4)
colnames(counts) <- paste0("Cell", 1:5)

# Create a minimal Seurat object
seurat_object <- SeuratObject::CreateSeuratObject(counts = counts)

# Downgrade assay to Seurat v4-compatible structure (if Seurat v5 is used)
seurat_object[["RNA"]] <- as(seurat_object[["RNA"]], Class = "Assay")

# Add minimal metadata: cell type, sample, and condition
seurat_object$celltypes <- c("CellType1", "CellType2", "CellType1", "CellType2", "CellType1")
seurat_object$samples <- c("Sample1", "Sample1", "Sample2", "Sample2", "Sample1")
seurat_object$condition <- c("ConditionA", "ConditionA", "ConditionB", "ConditionB", "ConditionA")

# Prepare Seurat object for analysis
seurat_object <- prepare_seurat_object(
  seurat_object,
  celltype_col = "celltypes",
  sample_id_col = "samples",
  condition_col = "condition",
  query_list = c("ConditionB"),
  control_list = c("ConditionA")
)
}
